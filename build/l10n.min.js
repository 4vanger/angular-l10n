/*!
 * l10n-angular 0.1.0 2013-03-31
 * Copyright 2013 Andrew Kulinich. Released under the MIT license
 */
(function(){var t=[].slice;angular.module("l10n",[]).provider("l10n",{db:{},localeMessages:{},locale:null,add:function(t,e){var s,l,n;for(l=0,n=e.length;n>l;l++)s=e[l],angular.isFunction(this.db[method])&&(e["$"+s]=e[s],delete e[s]);return this.localeMessages[t]===void 0&&(this.localeMessages[t]={}),angular.extend(this.localeMessages[t],e),t?this.setLocale(t):void 0},setLocale:function(t){var e,s,l;l=this.db;for(e in l)s=l[e],angular.isFunction(this.db[e])||delete this.db[e];return this.locale=t,angular.extend(this.db,this.localeMessages[this.locale])},$get:["$rootScope",function(e){var s=this;return this.db.setLocale=function(t){return s.setLocale(t),e.$broadcast("l10n-locale",t)},this.db.getLocale=function(){return s.locale},this.db.get=function(){var e,s,l,n,a,i,r,o;for(e=arguments[0],i=arguments.length>=2?t.call(arguments,1):[],l=e,angular.isFunction(this[e])&&(e="$"+e),n=this;e.indexOf(".")>0;){if(o=e.split(".",2),e=o[0],a=o[1],void 0===n[e])return l;n=n[e],e=a}if(r=n[e],null==r)return l;if("string"==typeof r){for(;"@"===r.charAt(0);)s=this.get(r.substr(1)),s!==void 0&&(r=s);r.length>=2&&"\\"===r.charAt(0)&&"@"===r.charAt(1)&&(r=r.substr(1));for(var c=0;i.length>c;c++)r=r.replace(RegExp("%"+(c+1)+"([^\\d]|$)","g"),i[c]+"$1")}return r},this.db}]})}).call(this);