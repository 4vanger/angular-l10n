/*!
 * l10n-angular 0.1.0 2013-07-08
 * Copyright 2013 Andrew Kulinich. Released under the MIT license
 */
(function(){var e=[].slice;angular.module("l10n",["ngLocale"]).provider("l10n",{db:{},localeMessages:{},add:function(e,t){var s,n,r;for(n=0,r=t.length;r>n;n++)s=t[n],angular.isFunction(this.db[method])&&(t["$"+s]=t[s],delete t[s]);return this.localeMessages[e]===void 0&&(this.localeMessages[e]={}),angular.extend(this.localeMessages[e],t)},setLocale:function(e){var t;for(t in this.db)angular.isFunction(this.db[t])||delete this.db[t];return angular.extend(this.db,this.localeMessages[e])},$get:["$rootScope","$locale",function(t,s){var n=this;return this.setLocale(s.id),this.db.getAllLocales=function(){return n.localeMessages},this.db.setLocale=function(e){return s.id=e,n.setLocale(e),t.$broadcast("l10n-locale",e)},this.db.getLocale=function(){return s.id},this.db.get=function(){var t,s,n,r,a,i,l,o;if(t=arguments[0],l=arguments.length>=2?e.call(arguments,1):[],!t)return"";for(n=t,angular.isFunction(this[t])&&(t="$"+t),r=this;(a=t.indexOf("."))>0;){if(i=t.substr(a+1),t=t.substr(0,a),void 0===r[t])return n;r=r[t],t=i}if(o=r[t],null==o)return n;if("string"==typeof o){for(;"@"===o.charAt(0);)s=this.get(o.substr(1)),s!==void 0&&(o=s);o.length>=2&&"\\"===o.charAt(0)&&"@"===o.charAt(1)&&(o=o.substr(1));for(var u=0;l.length>u;u++)o=o.replace(RegExp("%"+(u+1)+"([^\\d]|$)","g"),l[u]+"$1")}return o},this.db}]})}).call(this);