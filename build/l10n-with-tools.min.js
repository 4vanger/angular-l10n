/*!
 * l10n-angular 0.1.1 2015-06-29
 * Copyright 2013-2014 Andrew Kulinich. Released under the MIT license
 */
(function(){var a=[].slice;angular.module("l10n",["ngLocale"]).provider("l10n",{db:{},locale:null,fallbackLocale:null,localeMessages:{},transform:null,add:function(a,b){var c,d,e;for(this.transform&&(b=this.transform(a,b)),d=0,e=b.length;e>d;d++)c=b[d],angular.isFunction(this.db[method])&&(b["$"+c]=b[c],delete b[c]);return"undefined"==typeof this.localeMessages[a]&&(this.localeMessages[a]={}),angular.extend(this.localeMessages[a],b)},setLocale:function(a){var b;this.locale=a;for(b in this.db)angular.isFunction(this.db[b])||delete this.db[b];return angular.extend(this.db,this.localeMessages[a])},$get:["$rootScope","$locale",function(b,c){var d,e=this;return this.locale&&(c.id=this.locale),this.setLocale(c.id),this.db.getAllLocales=function(){return e.localeMessages},this.db.setLocale=function(a){return c.id=a,e.setLocale(a),b.$broadcast("l10n-locale",a)},this.db.getLocale=function(){return c.id},this.db.setFallbackLocale=function(a){return e.fallbackLocale=a},this.db.getFallbackLocale=function(){return e.fallbackLocale},d=function(a,b){var c,d,e,f;for(c=b;(d=a.indexOf("."))>0;){if(e=a.substr(d+1),a=a.substr(0,d),"undefined"==typeof c[a])return null;c=c[a],a=e}return f=c[a],null==f&&(f=null),f},this.db.get=function(){var b,c,e,f,g,h;if(e=arguments[0],g=2<=arguments.length?a.call(arguments,1):[],!e)return"";if(b=this.getAllLocales(),c=this.getFallbackLocale(),angular.isFunction(this[e])&&(e="$"+e),h=d(e,this),!h&&c&&(null!=b?b[c]:void 0)&&(h=d(e,b[c])),h||(h=e),"string"==typeof h){for(;"@"===h.charAt(0);)f=this.get(h.substr(1)),"undefined"!=typeof f&&(h=f);h.length>=2&&"\\"===h.charAt(0)&&"@"===h.charAt(1)&&(h=h.substr(1));for(var i=0;i<g.length;i++)h=h.replace(new RegExp("%"+(i+1)+"([^\\d]|$)","g"),g[i]+"$1")}return h},this.db}]})}).call(this),function(){var a,b,c=[].slice;a=function(a,b,c,d){var e,f;if(!c)return c;e=c.split(":"),f=function(){var a;return a=b.get.apply(b,e),null!==a&&(c=a),d(c)};for(var g=1;g<e.length;g++)try{var h=e[g];e[g]=a.$eval(h)||"",+function(b){a.$watch(h,function(a){e[b]=a||"",f()})}(g)}catch(i){e[g]=""}return a.$on("l10n-locale",f),f()},b=angular.module("l10n-tools",["l10n"]),angular.forEach(["text","html","title","placeholder","href","value"],function(c){var d;return d="l10n"+c.charAt(0).toUpperCase()+c.substr(1),b.directive(d,["l10n","$interpolate",function(b,e){return{restrict:"A",priority:90,link:function(e,f,g){var h;switch(c){case"html":h=function(a){return f.html(a)};break;case"text":h=function(a){return f.text(a)};break;default:h=h=function(a){return f.attr(c,a)}}return g.$observe(d,function(){return a(e,b,g[d],h)})}}}])}),b.filter("l10n",["l10n",function(a){return function(){var b,d;return b=arguments[0],d=2<=arguments.length?c.call(arguments,1):[],a.get.apply(a,arguments)}}])}.call(this);