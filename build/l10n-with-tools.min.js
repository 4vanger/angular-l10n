/*!
 * l10n-angular 0.1.0 2013-04-05
 * Copyright 2013 Andrew Kulinich. Released under the MIT license
 */
(function(){var t=[].slice;angular.module("l10n",[]).provider("l10n",{db:{},localeMessages:{},locale:null,add:function(t,e){var n,r,l;for(r=0,l=e.length;l>r;r++)n=e[r],angular.isFunction(this.db[method])&&(e["$"+n]=e[n],delete e[n]);return this.localeMessages[t]===void 0&&(this.localeMessages[t]={}),angular.extend(this.localeMessages[t],e),t?this.setLocale(t):void 0},setLocale:function(t){var e,n,r;r=this.db;for(e in r)n=r[e],angular.isFunction(this.db[e])||delete this.db[e];return this.locale=t,angular.extend(this.db,this.localeMessages[this.locale])},$get:["$rootScope",function(e){var n=this;return this.db.setLocale=function(t){return n.setLocale(t),e.$broadcast("l10n-locale",t)},this.db.getLocale=function(){return n.locale},this.db.get=function(){var e,n,r,l,a,s,i,o;for(e=arguments[0],s=arguments.length>=2?t.call(arguments,1):[],r=e,angular.isFunction(this[e])&&(e="$"+e),l=this;e.indexOf(".")>0;){if(o=e.split(".",2),e=o[0],a=o[1],void 0===l[e])return r;l=l[e],e=a}if(i=l[e],null==i)return r;if("string"==typeof i){for(;"@"===i.charAt(0);)n=this.get(i.substr(1)),n!==void 0&&(i=n);i.length>=2&&"\\"===i.charAt(0)&&"@"===i.charAt(1)&&(i=i.substr(1));for(var u=0;s.length>u;u++)i=i.replace(RegExp("%"+(u+1)+"([^\\d]|$)","g"),s[u]+"$1")}return i},this.db}]})}).call(this),function(){var t,e,n=[].slice;t=function(t,e,n,r){var l,a;l=n.split(":"),a=function(){var t;return t=e.get.apply(e,l),null!==t&&(n=t),r(n)};for(var s=1;l.length>s;s++)try{var i=l[s];l[s]=t.$eval(i)||"",+function(e){t.$watch(i,function(t){l[e]=t||"",a()})}(s)}catch(o){l[s]=""}return t.$on("l10n-locale",a),a()},e=angular.module("l10n-tools",["l10n"]),angular.forEach(["text","html","title","placeholder","href","value"],function(n){var r;return r="l10n"+n.charAt(0).toUpperCase()+n.substr(1),e.directive(r,["l10n",function(e){return{restrict:"A",priority:90,link:function(l,a,s){var i;switch(n){case"html ":i=function(t){return a.html(t)};break;case"text":i=function(t){return a.text(t)};break;default:i=i=function(t){return a.attr(n,t)}}return t(l,e,s[r],i)}}}])}),e.filter("l10n",["l10n",function(t){return function(){var e,r;return e=arguments[0],r=arguments.length>=2?n.call(arguments,1):[],t.get.apply(t,arguments)}}])}.call(this);