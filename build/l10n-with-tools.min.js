/*!
 * l10n-angular 0.1.0 2013-03-26
 * Copyright 2013 Andrew Kulinich. Released under the MIT license
 */
(function(){var t=[].slice;angular.module("l10n",[]).provider("l10n",{db:{},localeMessages:{},locale:null,add:function(t,n){var e,r,l;for(r=0,l=n.length;l>r;r++)e=n[r],angular.isFunction(this.db[method])&&(n["$"+e]=n[e],delete n[e]);return this.localeMessages[t]===void 0&&(this.localeMessages[t]={}),angular.extend(this.localeMessages[t],n),t?void 0:this.setLocale(t)},setLocale:function(t){var n,e,r;r=this.db;for(n in r)e=r[n],angular.isFunction(this.db[n])||delete this.db[n];return this.locale=t,angular.extend(this.db,this.localeMessages[this.locale])},$get:["$rootScope",function(n){var e=this;return this.db.setLocale=function(t){return e.setLocale(t),n.$broadcast("l10n-locale",t)},this.db.getLocale=function(){return e.locale},this.db.get=function(){var n,e,r,l,i,a,o,u;for(n=arguments[0],a=arguments.length>=2?t.call(arguments,1):[],r=n,angular.isFunction(this[n])&&(n="$"+n),l=this;n.indexOf(".")>0;){if(u=n.split(".",2),n=u[0],i=u[1],void 0===l[n])return r;l=l[n],n=i}if(o=l[n],null==o)return r;if("string"==typeof o){for(;"@"===o.charAt(0);)e=this.get(o.substr(1)),e!==void 0&&(o=e);o.length>=2&&"\\"===o.charAt(0)&&"@"===o.charAt(1)&&(o=o.substr(1));for(var s=0;a.length>s;s++)o=o.replace(RegExp("%"+(s+1)+"([^\\d]|$)","g"),a[s]+"$1")}return o},this.db}]})}).call(this),function(){var t,n;t=function(t,n,e,r){var l,i;l=e.split(":"),i=function(){var t;return t=n.get.apply(n,l),null!==t&&(e=t),r(e)};for(var a=1;l.length>a;a++)try{var o=l[a];l[a]=t.$eval(o)||"",+function(n){t.$watch(o,function(t){l[n]=t||"",i()})}(a)}catch(u){l[a]=""}return t.$on("l10n-locale",i),i()},n=angular.module("l10n-tools",["l10n"]).directive("l10nHtml",["l10n",function(n){return{restrict:"A",link:function(e,r,l){return t(e,n,l.l10nHtml,function(t){return r.html(t)})}}}]).directive("l10nText",["l10n",function(n){return{restrict:"A",link:function(e,r,l){return t(e,n,l.l10nText,function(t){return r.text(t)})}}}]),angular.forEach(["title","placeholder","href","value"],function(e){var r;return r="l10n"+e.charAt(0).toUpperCase()+e.substr(1),n.directive(r,["l10n",function(n){return{restrict:"A",link:function(l,i,a){return t(l,n,a[r],function(t){return i.attr(e,t)})}}}])})}.call(this);